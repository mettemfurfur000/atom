items:
  atom:straw:
    material: wheat
    data:
      item-name: <!i><white><l10n:item.straw.name>
      lore:
        - ""
        - <!i><dark_gray><l10n:item.straw.lore_1>
        - <!i><dark_gray><l10n:item.straw.lore_2>
        - ""
        - <!i><dark_gray><l10n:item.straw.lore_3>
        - <!i><dark_gray><l10n:item.straw.lore_4>
        - ""
        - <!i><white><image:atom:badge_material> <image:atom:badge_age_foraging>
      components:
        custom_data:
          campfire_burn_time_seconds: 90
    model:
      template: default:model/simplified_generated
      arguments:
        path: minecraft:item/straw
    behavior:
      - type: block_item
        block:
          settings:
            template:
              - default:sound/stone
              - default:hardness/none
            overrides:
              map-color: 11
              push-reaction: destroy
          behaviors:
            - type: liquid_flowable_block
            - type: sturdy_base_block
              direction: down
              support-types:
                - full
            - type: stackable_block
              property: layers
              items:
                - atom:straw
              sounds:
                stack: minecraft:block.stone.fall
          loot:
            pools:
              - rolls: 1
                entries:
                  - type: item
                    item: atom:straw
                    functions:
                      - type: set_count
                        count: 4
                        add: false
                        conditions:
                          - type: match_block_property
                            properties:
                              layers: 4
                      - type: set_count
                        count: 3
                        add: false
                        conditions:
                          - type: match_block_property
                            properties:
                              layers: 3
                      - type: set_count
                        count: 2
                        add: false
                        conditions:
                          - type: match_block_property
                            properties:
                              layers: 2
                      - type: explosion_decay
          states:
            properties:
              layers:
                type: int
                range: 1~4
                default: 1
            appearances:
              2:
                auto-state: lower_tripwire
                models:
                  - path: minecraft:block/custom/straw_layer_2
                    generation:
                      parent: minecraft:block/snow_height4
                      textures:
                        texture: minecraft:block/hay_block_top
                    weight: 1
              4:
                auto-state: higher_tripwire
                models:
                  - path: minecraft:block/custom/straw_layer_4
                    generation:
                      parent: minecraft:block/snow_height8
                      textures:
                        texture: minecraft:block/hay_block_top
                    weight: 1
              6:
                auto-state: higher_tripwire
                models:
                  - path: minecraft:block/custom/straw_layer_6
                    generation:
                      parent: minecraft:block/snow_height12
                      textures:
                        texture: minecraft:block/hay_block_top
                    weight: 1
              full:
                auto-state: solid
                models:
                  - path: minecraft:block/custom/straw_layer_8
                    generation:
                      parent: minecraft:block/cube_all
                      textures:
                        all: minecraft:block/hay_block_top
                    weight: 1
            variants:
              layers=1:
                appearance: '2'
              layers=2:
                appearance: '4'
              layers=3:
                appearance: '6'
              layers=4:
                appearance: 'full'